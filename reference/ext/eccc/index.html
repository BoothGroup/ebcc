<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Eccc - ebcc</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Eccc";
        var mkdocs_page_input_path = "reference/ext/eccc.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> ebcc
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../features/">Features</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Code Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Coupled cluster</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../cc/rebcc/">Restricted</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../cc/uebcc/">Unrestricted</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../cc/gebcc/">Generalised</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../cc/base/">Base</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Equation of motion</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../eom/reom/">Restricted</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../eom/ueom/">Unrestricted</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../eom/geom/">Generalised</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../eom/base/">Base</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Orbital optimisation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >Brueckner</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../opt/rbrueckner/">Restricted</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../opt/ubrueckner/">Unrestricted</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../opt/gbrueckner/">Generalised</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../opt/base/">Base</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Core</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../core/ansatz/">Ansatz</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../core/damping/">Damping</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../core/dump/">Dumping</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../core/logging/">Logging</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../core/precision/">Precision</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Hamiltonian</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ham/space/">Space</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ham/fock/">Fock</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ham/eris/">ERIs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ham/cderis/">CDERIs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ham/elbos/">Bosonic</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ham/base/">Base</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Utility</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../util/permutations/">Permutations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../util/einsumfunc/">Einstein summations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../util/misc/">Miscellaneous</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">ebcc</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Eccc</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="doc doc-object doc-module">



<a id="ebcc.ext.eccc"></a>
    <div class="doc doc-contents first">

        <p>Externally corrected coupled cluster.</p>








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="ebcc.ext.eccc.BaseOptions" class="doc doc-heading">
              <code class="highlight language-python">ebcc.ext.eccc.BaseOptions(mixed_terms_strategy='fixed')</code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="ebcc.util._BaseOptions">_BaseOptions</span></code></p>


        <p>Options for ecCC calculations.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>mixed_terms_strategy</code></b>
                  (<code><span title="typing.Literal">Literal</span>[&#39;fixed&#39;, &#39;update&#39;, &#39;ignore&#39;]</code>, default:
                      <code>&#39;fixed&#39;</code>
)
              â€“
              <div class="doc-md-description">
                <p>Strategy for mixed terms. If "fixed", the mixed terms are calculated
once and kept fixed. If "update", the mixed terms are recalculated at each iteration.
If "ignore", the mixed terms are not calculated at all.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>








  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ebcc.ext.eccc.BaseExternalCorrection" class="doc doc-heading">
              <code class="highlight language-python">ebcc.ext.eccc.BaseExternalCorrection(cc, amplitudes, options=None, **kwargs)</code>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="contextlib.AbstractContextManager">AbstractContextManager</span>[None]</code></p>


        <p>Context manager for externally correcting an EBCC calculation.</p>
<p>This context manager is used to externally correct an EBCC calculation by updating the T1 and T2
amplitudes according to some T3 and T4 amplitudes passed as an argument. The T3 and T4
amplitudes are assumed to span the active space as defined by <code>ebcc.space</code>.</p>

        <p>Initialise the context manager.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>cc</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.cc.base.BaseEBCC" href="../../cc/base/#ebcc.cc.base.BaseEBCC">BaseEBCC</a></code>)
              â€“
              <div class="doc-md-description">
                <p>EBCC object.</p>
              </div>
            </li>
            <li>
              <b><code>amplitudes</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.util.Namespace" href="../../util/misc/#ebcc.util.misc.Namespace">Namespace</a>[<a class="autorefs autorefs-internal" title="ebcc.cc.base.SpinArrayType" href="../../cc/base/#ebcc.cc.base.SpinArrayType">SpinArrayType</a>]</code>)
              â€“
              <div class="doc-md-description">
                <p>Cluster amplitudes.</p>
              </div>
            </li>
            <li>
              <b><code>options</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ebcc.ext.eccc.BaseOptions" href="#ebcc.ext.eccc.BaseOptions">BaseOptions</a>]</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Options for the ecCC calculation.</p>
              </div>
            </li>
            <li>
              <b><code>**kwargs</code></b>
                  (<code><span title="typing.Any">Any</span></code>, default:
                      <code>{}</code>
)
              â€“
              <div class="doc-md-description">
                <p>Additional keyword arguments used to update <code>options</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>





                  <details class="quote">
                    <summary>Source code in <code>ebcc/ext/eccc.py</code></summary>
                    <pre class="highlight"><code class="language-python">def __init__(
    self,
    cc: BaseEBCC,
    amplitudes: Namespace[SpinArrayType],
    options: Optional[BaseOptions] = None,
    **kwargs: Any,
) -&gt; None:
    """Initialise the context manager.

    Args:
        cc: EBCC object.
        amplitudes: Cluster amplitudes.
        options: Options for the ecCC calculation.
        **kwargs: Additional keyword arguments used to update `options`.
    """
    # Options:
    if options is None:
        options = self.Options()
    self.options = options
    for key, val in kwargs.items():
        setattr(self.options, key, val)

    # Parameters:
    self.cc = cc
    self.amplitudes = amplitudes

    # Attributes:
    self._update_amps_old = None

    # Logging:
    init_logging(self.cc.log)
    self.cc.log.info(f"Applying {ANSI.m}external corrections{ANSI.R}.")
    self.cc.log.info(
        f" &gt; mixed_terms_strategy:  {ANSI.y}{self.options.mixed_terms_strategy}{ANSI.R}"
    )
    self.cc.log.debug("")</code></pre>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="ebcc.ext.eccc.BaseExternalCorrection.__enter__" class="doc doc-heading">
            <code class="highlight language-python">ebcc.ext.eccc.BaseExternalCorrection.__enter__()</code>

</h3>


    <div class="doc doc-contents ">

        <p>Enter the context manager.</p>

            <details class="quote">
              <summary>Source code in <code>ebcc/ext/eccc.py</code></summary>
              <pre class="highlight"><code class="language-python">def __enter__(self) -&gt; None:
    """Enter the context manager."""
    # Save the original update_amps method
    self._update_amps_old = self.cc.update_amps

    # Get the ERIs
    eris = self.cc.get_eris()

    # Get the fixed external corrections
    amplitudes = self._get_external_amplitudes()
    ext = self._update_external_corrections(eris=eris, amplitudes=amplitudes, which="external")
    if self.options.mixed_terms_strategy != "ignore":
        mix = self._update_external_corrections(eris=eris, amplitudes=amplitudes, which="mixed")

    def update_amps(
        eris: Optional[Any] = None,
        amplitudes: Optional[Namespace[SpinArrayType]] = None,
    ) -&gt; Namespace[SpinArrayType]:
        """Update the cluster amplitudes."""
        # Update the mixed terms if necessary
        nonlocal mix
        if self.options.mixed_terms_strategy == "update" or (
            self.options.mixed_terms_strategy == "fixed" and mix is None
        ):
            if amplitudes is None:
                raise ValueError(
                    "Cannot update mixed terms of the external corrections without "
                    "providing the cluster amplitudes."
                )
            amplitudes_full = amplitudes.copy()
            for key, val in self.amplitudes.items():
                if key not in amplitudes_full:
                    amplitudes_full[key] = val
            mix = self._update_external_corrections(
                eris=eris, amplitudes=amplitudes_full, which="mixed"
            )

        # Perform the original update_amps method
        assert self._update_amps_old is not None
        amps = self._update_amps_old(eris=eris, amplitudes=amplitudes)

        # Add the external corrections
        self._add_to_amps(amps, ext)
        if self.options.mixed_terms_strategy != "ignore":
            self._add_to_amps(amps, mix)

        return amps

    # Replace the original update_amps method
    update_amps.__doc__ = self._update_amps_old.__doc__
    self.cc.update_amps = update_amps  # type: ignore[method-assign]</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="ebcc.ext.eccc.BaseExternalCorrection.__exit__" class="doc doc-heading">
            <code class="highlight language-python">ebcc.ext.eccc.BaseExternalCorrection.__exit__(*args)</code>

</h3>


    <div class="doc doc-contents ">

        <p>Exit the context manager.</p>

            <details class="quote">
              <summary>Source code in <code>ebcc/ext/eccc.py</code></summary>
              <pre class="highlight"><code class="language-python">def __exit__(self, *args: Any) -&gt; None:
    """Exit the context manager."""
    # Restore the original update_amps method
    assert self._update_amps_old is not None
    self.cc.update_amps = self._update_amps_old  # type: ignore[method-assign]
    self._update_amps_old = None</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ebcc.ext.eccc.ExternalCorrectionREBCC" class="doc doc-heading">
              <code class="highlight language-python">ebcc.ext.eccc.ExternalCorrectionREBCC(cc, amplitudes, options=None, **kwargs)</code>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ebcc.ext.eccc.BaseExternalCorrection" href="#ebcc.ext.eccc.BaseExternalCorrection">BaseExternalCorrection</a></code></p>


        <p>Context manager for externally correcting a REBCC calculation.</p>
<p>This context manager is used to externally correct an EBCC calculation by updating the T1 and T2
amplitudes according to some T3 and T4 amplitudes passed as an argument. The T3 and T4
amplitudes are assumed to span the active space as defined by <code>ebcc.space</code>.</p>

        <p>Initialise the context manager.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>cc</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.cc.base.BaseEBCC" href="../../cc/base/#ebcc.cc.base.BaseEBCC">BaseEBCC</a></code>)
              â€“
              <div class="doc-md-description">
                <p>EBCC object.</p>
              </div>
            </li>
            <li>
              <b><code>amplitudes</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.util.Namespace" href="../../util/misc/#ebcc.util.misc.Namespace">Namespace</a>[<a class="autorefs autorefs-internal" title="ebcc.cc.base.SpinArrayType" href="../../cc/base/#ebcc.cc.base.SpinArrayType">SpinArrayType</a>]</code>)
              â€“
              <div class="doc-md-description">
                <p>Cluster amplitudes.</p>
              </div>
            </li>
            <li>
              <b><code>options</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ebcc.ext.eccc.BaseOptions" href="#ebcc.ext.eccc.BaseOptions">BaseOptions</a>]</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Options for the ecCC calculation.</p>
              </div>
            </li>
            <li>
              <b><code>**kwargs</code></b>
                  (<code><span title="typing.Any">Any</span></code>, default:
                      <code>{}</code>
)
              â€“
              <div class="doc-md-description">
                <p>Additional keyword arguments used to update <code>options</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>





                  <details class="quote">
                    <summary>Source code in <code>ebcc/ext/eccc.py</code></summary>
                    <pre class="highlight"><code class="language-python">def __init__(
    self,
    cc: BaseEBCC,
    amplitudes: Namespace[SpinArrayType],
    options: Optional[BaseOptions] = None,
    **kwargs: Any,
) -&gt; None:
    """Initialise the context manager.

    Args:
        cc: EBCC object.
        amplitudes: Cluster amplitudes.
        options: Options for the ecCC calculation.
        **kwargs: Additional keyword arguments used to update `options`.
    """
    # Options:
    if options is None:
        options = self.Options()
    self.options = options
    for key, val in kwargs.items():
        setattr(self.options, key, val)

    # Parameters:
    self.cc = cc
    self.amplitudes = amplitudes

    # Attributes:
    self._update_amps_old = None

    # Logging:
    init_logging(self.cc.log)
    self.cc.log.info(f"Applying {ANSI.m}external corrections{ANSI.R}.")
    self.cc.log.info(
        f" &gt; mixed_terms_strategy:  {ANSI.y}{self.options.mixed_terms_strategy}{ANSI.R}"
    )
    self.cc.log.debug("")</code></pre>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ebcc.ext.eccc.ExternalCorrectionUEBCC" class="doc doc-heading">
              <code class="highlight language-python">ebcc.ext.eccc.ExternalCorrectionUEBCC(cc, amplitudes, options=None, **kwargs)</code>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ebcc.ext.eccc.BaseExternalCorrection" href="#ebcc.ext.eccc.BaseExternalCorrection">BaseExternalCorrection</a></code></p>


        <p>Context manager for externally correcting a UEBCC calculation.</p>
<p>This context manager is used to externally correct an EBCC calculation by updating the T1 and T2
amplitudes according to some T3 and T4 amplitudes passed as an argument. The T3 and T4
amplitudes are assumed to span the active space as defined by <code>ebcc.space</code>.</p>

        <p>Initialise the context manager.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>cc</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.cc.base.BaseEBCC" href="../../cc/base/#ebcc.cc.base.BaseEBCC">BaseEBCC</a></code>)
              â€“
              <div class="doc-md-description">
                <p>EBCC object.</p>
              </div>
            </li>
            <li>
              <b><code>amplitudes</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.util.Namespace" href="../../util/misc/#ebcc.util.misc.Namespace">Namespace</a>[<a class="autorefs autorefs-internal" title="ebcc.cc.base.SpinArrayType" href="../../cc/base/#ebcc.cc.base.SpinArrayType">SpinArrayType</a>]</code>)
              â€“
              <div class="doc-md-description">
                <p>Cluster amplitudes.</p>
              </div>
            </li>
            <li>
              <b><code>options</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ebcc.ext.eccc.BaseOptions" href="#ebcc.ext.eccc.BaseOptions">BaseOptions</a>]</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Options for the ecCC calculation.</p>
              </div>
            </li>
            <li>
              <b><code>**kwargs</code></b>
                  (<code><span title="typing.Any">Any</span></code>, default:
                      <code>{}</code>
)
              â€“
              <div class="doc-md-description">
                <p>Additional keyword arguments used to update <code>options</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>





                  <details class="quote">
                    <summary>Source code in <code>ebcc/ext/eccc.py</code></summary>
                    <pre class="highlight"><code class="language-python">def __init__(
    self,
    cc: BaseEBCC,
    amplitudes: Namespace[SpinArrayType],
    options: Optional[BaseOptions] = None,
    **kwargs: Any,
) -&gt; None:
    """Initialise the context manager.

    Args:
        cc: EBCC object.
        amplitudes: Cluster amplitudes.
        options: Options for the ecCC calculation.
        **kwargs: Additional keyword arguments used to update `options`.
    """
    # Options:
    if options is None:
        options = self.Options()
    self.options = options
    for key, val in kwargs.items():
        setattr(self.options, key, val)

    # Parameters:
    self.cc = cc
    self.amplitudes = amplitudes

    # Attributes:
    self._update_amps_old = None

    # Logging:
    init_logging(self.cc.log)
    self.cc.log.info(f"Applying {ANSI.m}external corrections{ANSI.R}.")
    self.cc.log.info(
        f" &gt; mixed_terms_strategy:  {ANSI.y}{self.options.mixed_terms_strategy}{ANSI.R}"
    )
    self.cc.log.debug("")</code></pre>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="ebcc.ext.eccc.ExternalCorrectionGEBCC" class="doc doc-heading">
              <code class="highlight language-python">ebcc.ext.eccc.ExternalCorrectionGEBCC(cc, amplitudes, options=None, **kwargs)</code>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="ebcc.ext.eccc.BaseExternalCorrection" href="#ebcc.ext.eccc.BaseExternalCorrection">BaseExternalCorrection</a></code></p>


        <p>Context manager for externally correcting a GEBCC calculation.</p>
<p>This context manager is used to externally correct an EBCC calculation by updating the T1 and T2
amplitudes according to some T3 and T4 amplitudes passed as an argument. The T3 and T4
amplitudes are assumed to span the active space as defined by <code>ebcc.space</code>.</p>

        <p>Initialise the context manager.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>cc</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.cc.base.BaseEBCC" href="../../cc/base/#ebcc.cc.base.BaseEBCC">BaseEBCC</a></code>)
              â€“
              <div class="doc-md-description">
                <p>EBCC object.</p>
              </div>
            </li>
            <li>
              <b><code>amplitudes</code></b>
                  (<code><a class="autorefs autorefs-internal" title="ebcc.util.Namespace" href="../../util/misc/#ebcc.util.misc.Namespace">Namespace</a>[<a class="autorefs autorefs-internal" title="ebcc.cc.base.SpinArrayType" href="../../cc/base/#ebcc.cc.base.SpinArrayType">SpinArrayType</a>]</code>)
              â€“
              <div class="doc-md-description">
                <p>Cluster amplitudes.</p>
              </div>
            </li>
            <li>
              <b><code>options</code></b>
                  (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="ebcc.ext.eccc.BaseOptions" href="#ebcc.ext.eccc.BaseOptions">BaseOptions</a>]</code>, default:
                      <code>None</code>
)
              â€“
              <div class="doc-md-description">
                <p>Options for the ecCC calculation.</p>
              </div>
            </li>
            <li>
              <b><code>**kwargs</code></b>
                  (<code><span title="typing.Any">Any</span></code>, default:
                      <code>{}</code>
)
              â€“
              <div class="doc-md-description">
                <p>Additional keyword arguments used to update <code>options</code>.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>





                  <details class="quote">
                    <summary>Source code in <code>ebcc/ext/eccc.py</code></summary>
                    <pre class="highlight"><code class="language-python">def __init__(
    self,
    cc: BaseEBCC,
    amplitudes: Namespace[SpinArrayType],
    options: Optional[BaseOptions] = None,
    **kwargs: Any,
) -&gt; None:
    """Initialise the context manager.

    Args:
        cc: EBCC object.
        amplitudes: Cluster amplitudes.
        options: Options for the ecCC calculation.
        **kwargs: Additional keyword arguments used to update `options`.
    """
    # Options:
    if options is None:
        options = self.Options()
    self.options = options
    for key, val in kwargs.items():
        setattr(self.options, key, val)

    # Parameters:
    self.cc = cc
    self.amplitudes = amplitudes

    # Attributes:
    self._update_amps_old = None

    # Logging:
    init_logging(self.cc.log)
    self.cc.log.info(f"Applying {ANSI.m}external corrections{ANSI.R}.")
    self.cc.log.info(
        f" &gt; mixed_terms_strategy:  {ANSI.y}{self.options.mixed_terms_strategy}{ANSI.R}"
    )
    self.cc.log.debug("")</code></pre>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
