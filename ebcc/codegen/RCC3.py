# Code generated by qwick.

import numpy as np
from ebcc.util import pack_2e, einsum, Namespace

def energy(f=None, v=None, nocc=None, nvir=None, t1=None, t2=None, t3=None, **kwargs):
    # energy
    x0 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x0 += einsum("ia,jb->iajb", t1, t1)
    x1 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x1 += einsum("ijab->iajb", t2)
    x1 += einsum("iajb->iajb", x0)
    del x0
    x2 = 0
    x2 += einsum("ia,ia->", f.ov, t1)
    e_cc = 0
    e_cc += einsum("->", x2) * 2.0
    del x2
    x3 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x3 += einsum("iajb->iajb", x1) * 2.0
    x3 += einsum("ibja->iajb", x1) * -1.0
    del x1
    x4 = 0
    x4 += einsum("iajb,iajb->", v.ovov, x3)
    del x3
    e_cc += einsum("->", x4)
    del x4

    return e_cc

def update_amps(f=None, v=None, nocc=None, nvir=None, t1=None, t2=None, t3=None, **kwargs):
    # T amplitudes
    t1new = np.zeros((nocc, nvir), dtype=np.float64)
    t1new += einsum("ia->ia", f.ov)
    t2new = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    t2new += einsum("iajb->ijab", v.ovov)
    x0 = np.zeros((nvir, nvir), dtype=np.float64)
    x0 += einsum("jc,jcab->ab", t1, v.ovvv)
    x1 = np.zeros((nocc, nocc), dtype=np.float64)
    x1 += einsum("jb,ijkb->ik", t1, v.ooov)
    x2 = np.zeros((nvir, nvir), dtype=np.float64)
    x2 += einsum("ab->ab", f.vv)
    x2 += einsum("ab->ab", x0) * 2.0
    x3 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x3 += einsum("jbkc->jbkc", v.ovov)
    x3 += einsum("jckb->jbkc", v.ovov) * -1.0
    x4 = np.zeros((nocc, nvir), dtype=np.float64)
    x4 += einsum("jb,jbkc->kc", t1, v.ovov)
    x5 = np.zeros((nocc, nocc), dtype=np.float64)
    x5 += einsum("ib,kb->ik", t1, x4)
    x6 = np.zeros((nvir, nvir), dtype=np.float64)
    x6 += einsum("klbd,kcld->bc", t2, v.ovov)
    x7 = np.zeros((nvir, nvir), dtype=np.float64)
    x7 += einsum("kldb,kdlc->bc", t2, v.ovov)
    x8 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x8 += einsum("ijbc->ijcb", t2) * -1.0
    x8 += einsum("ijcb->ijcb", t2) * 2.0
    x9 = np.zeros((nvir, nocc), dtype=np.float64)
    x9 += einsum("jbac,ijcb->ai", v.ovvv, x8)
    t1new += einsum("ai->ia", x9)
    del x9
    x10 = np.zeros((nocc, nocc), dtype=np.float64)
    x10 += einsum("ikbc,jckb->ij", t2, v.ovov)
    x11 = np.zeros((nvir, nvir), dtype=np.float64)
    x11 += einsum("kldb,kcld->bc", t2, v.ovov)
    x12 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x12 += einsum("ijkb->ijkb", v.ooov) * 3.0
    x12 += einsum("ikjb->ijkb", v.ooov) * -1.0
    x13 = np.zeros((nvir, nocc), dtype=np.float64)
    x13 += einsum("jkab,ijkb->ai", t2, x12)
    del x12
    t1new += einsum("ai->ia", x13) * -0.5
    del x13
    x14 = np.zeros((nocc, nocc), dtype=np.float64)
    x14 += einsum("jb,ikjb->ik", t1, v.ooov)
    x15 = np.zeros((nocc, nocc), dtype=np.float64)
    x15 += einsum("ik->ik", x1)
    del x1
    x15 += einsum("ik->ik", x14) * -2.0
    del x14
    x16 = np.zeros((nvir, nvir), dtype=np.float64)
    x16 += einsum("jc,jbac->ba", t1, v.ovvv)
    x17 = np.zeros((nocc, nocc), dtype=np.float64)
    x17 += einsum("jb,ib->ji", f.ov, t1)
    x18 = np.zeros((nvir, nocc), dtype=np.float64)
    x18 += einsum("jb,jckb->ck", t1, v.ovov)
    x19 = np.zeros((nocc, nocc), dtype=np.float64)
    x19 += einsum("ib,bk->ik", t1, x18)
    x20 = np.zeros((nocc, nvir), dtype=np.float64)
    x20 += einsum("ck->kc", x18) * -1.0
    x20 += einsum("kc->kc", x4) * 2.0
    x21 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x21 += einsum("ijab->ijab", v.oovv)
    x21 += einsum("iajb->ijab", v.ovov) * -2.0
    x22 = np.zeros((nvir, nvir), dtype=np.float64)
    x22 += einsum("klbd,kdlc->bc", t2, v.ovov)
    x23 = np.zeros((nocc, nvir), dtype=np.float64)
    x23 += einsum("jb,ijab->ia", t1, x21)
    t1new += einsum("ia->ia", x23) * -1.0
    del x23
    x24 = np.zeros((nocc, nocc), dtype=np.float64)
    x24 += einsum("ikbc,jbkc->ij", t2, v.ovov)
    x25 = np.zeros((nocc, nocc), dtype=np.float64)
    x25 += einsum("ij->ij", x10) * -1.0
    x25 += einsum("ij->ij", x24) * 2.0
    x26 = np.zeros((nocc, nvir), dtype=np.float64)
    x26 += einsum("jb->jb", f.ov)
    x26 += einsum("jb->jb", x20)
    x27 = np.zeros((nocc, nvir), dtype=np.float64)
    x27 += einsum("jb,ijab->ia", x26, x8)
    t1new += einsum("ia->ia", x27)
    del x27
    x28 = np.zeros((nocc, nocc), dtype=np.float64)
    x28 += einsum("ij->ji", f.oo)
    x28 += einsum("ji->ji", x17)
    x29 = np.zeros((nocc, nocc), dtype=np.float64)
    x29 += einsum("ik->ik", x15)
    del x15
    x29 += einsum("ki->ik", x28) * -1.0
    del x28
    x30 = np.zeros((nocc, nocc), dtype=np.float64)
    x30 += einsum("ik->ik", x19)
    del x19
    x30 += einsum("ik->ik", x5) * -2.0
    del x5
    x31 = np.zeros((nocc, nocc), dtype=np.float64)
    x31 += einsum("ik->ik", x29)
    x31 += einsum("ik->ik", x30)
    x32 = np.zeros((nocc, nocc), dtype=np.float64)
    x32 += einsum("ij->ij", x25)
    del x25
    x32 += einsum("ij->ij", x31) * -1.0
    del x31
    x33 = np.zeros((nvir, nocc), dtype=np.float64)
    x33 += einsum("ja,ij->ai", t1, x32)
    del x32
    t1new += einsum("ai->ia", x33) * -1.0
    del x33
    x34 = np.zeros((nocc, nocc, nocc, nvir, nvir, nvir), dtype=np.float64)
    x34 += einsum("ijkbac->ijkbac", t3)
    x34 += einsum("jikbac->ijkbac", t3) * -1.0
    x35 = np.zeros((nocc, nvir), dtype=np.float64)
    x35 += einsum("jbkc,ijkbac->ia", x3, x34)
    del x3, x34
    t1new += einsum("ia->ia", x35) * -0.25
    del x35
    x36 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x36 += einsum("jbkc->jbkc", v.ovov)
    x36 += einsum("jckb->jbkc", v.ovov) * -1.0
    x37 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x37 += einsum("jbkc->jckb", v.ovov) * -2.0
    x37 += einsum("jckb->jckb", x36)
    del x36
    x38 = np.zeros((nocc, nvir), dtype=np.float64)
    x38 += einsum("jckb,ijkabc->ia", x37, t3)
    del x37
    t1new += einsum("ia->ia", x38) * -0.5
    del x38
    x39 = np.zeros((nvir, nvir), dtype=np.float64)
    x39 += einsum("ab->ab", x11)
    del x11
    x39 += einsum("ab->ab", x22)
    del x22
    x40 = np.zeros((nvir, nvir), dtype=np.float64)
    x40 += einsum("ab->ab", x39)
    x40 += einsum("ab->ab", x7) * -1.0
    x41 = np.zeros((nvir, nvir), dtype=np.float64)
    x41 += einsum("ba->ab", x16) * -2.0
    x41 += einsum("ab->ab", x40)
    x42 = np.zeros((nvir, nvir), dtype=np.float64)
    x42 += einsum("ab->ab", x41)
    del x41
    x42 += einsum("ab->ab", x6) * -3.0
    x43 = np.zeros((nvir, nvir), dtype=np.float64)
    x43 += einsum("ab->ab", x2) * 2.0
    x43 += einsum("ab->ab", x42)
    del x42
    x44 = np.zeros((nocc, nvir), dtype=np.float64)
    x44 += einsum("ib,ab->ia", t1, x43)
    del x43
    t1new += einsum("ia->ia", x44) * 0.5
    del x44
    x45 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x45 += einsum("ijkb->ijkb", v.ooov)
    x45 += einsum("ikjb->ijkb", v.ooov) * -1.0
    x46 = np.zeros((nvir, nocc), dtype=np.float64)
    x46 += einsum("jkba,ijkb->ai", t2, x45)
    t1new += einsum("ai->ia", x46) * 0.5
    del x46
    x47 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x47 += einsum("ib,jbkc->ijkc", t1, v.ovov)
    x48 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x48 += einsum("dl,ijlabd->ijab", x18, t3)
    del x18
    t2new += einsum("ijab->ijab", x48) * -1.0
    t2new += einsum("jiba->ijab", x48) * -1.0
    del x48
    x49 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x49 += einsum("jlbc,iklc->jbik", t2, v.ooov)
    x50 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x50 += einsum("ljcb,iklc->jbik", t2, x45)
    del x45
    x51 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x51 += einsum("kcld,jilbcd->kjib", v.ovov, t3)
    x52 = np.zeros((nvir, nocc, nocc, nvir), dtype=np.float64)
    x52 += einsum("ka,kjib->ajib", t1, x51)
    del x51
    t2new += einsum("ajib->ijab", x52) * -1.0
    t2new += einsum("bija->ijab", x52) * -1.0
    del x52
    x53 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x53 += einsum("jlbd->jlbd", t2)
    x53 += einsum("jldb->jlbd", t2) * -1.0
    x54 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x54 += einsum("kc,ijcb->kijb", f.ov, t2)
    x55 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x55 += einsum("ikld,kjlabd->jabi", x47, t3)
    t2new += einsum("ibaj->ijab", x55) * -0.5
    t2new += einsum("jabi->ijab", x55) * -0.5
    del x55
    x56 = np.zeros((nvir, nvir), dtype=np.float64)
    x56 += einsum("la,ld->ad", t1, x20)
    del x20
    x57 = np.zeros((nvir, nvir), dtype=np.float64)
    x57 += einsum("bc->bc", x39)
    del x39
    x57 += einsum("bc->bc", x7) * -3.0
    del x7
    x58 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x58 += einsum("ikcb,kdlc->ibdl", t2, v.ovov)
    x59 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x59 += einsum("ljad,ibdl->jaib", t2, x58)
    t2new += einsum("jaib->ijab", x59)
    del x59
    x60 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x60 += einsum("jlcb,iklc->jbik", t2, v.ooov)
    x61 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x61 += einsum("ijcd,kdac->ijka", t2, v.ovvv)
    x62 = np.zeros((nvir, nvir), dtype=np.float64)
    x62 += einsum("bd->bd", x0) * 4.0
    del x0
    x62 += einsum("bd->bd", x57)
    del x57
    x63 = np.zeros((nvir, nvir), dtype=np.float64)
    x63 += einsum("bc->bc", x6) * -1.0
    x63 += einsum("bc->bc", x62)
    del x62
    x64 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x64 += einsum("ilac,jlkc->iajk", t2, v.ooov)
    x65 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x65 += einsum("ic,jkac->ijka", t1, v.oovv)
    x66 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x66 += einsum("lb,ikjl->bikj", t1, v.oooo)
    x67 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x67 += einsum("kcld,ijldbc->kijb", v.ovov, t3)
    x68 = np.zeros((nvir, nocc, nocc, nvir), dtype=np.float64)
    x68 += einsum("ka,kijb->aijb", t1, x67)
    del x67
    t2new += einsum("aijb->ijab", x68) * 0.5
    t2new += einsum("bjia->ijab", x68) * 0.5
    del x68
    x69 = np.zeros((nocc, nocc), dtype=np.float64)
    x69 += einsum("jk->jk", x10) * -1.0
    del x10
    x69 += einsum("jk->jk", x24)
    del x24
    x70 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x70 += einsum("ld,ijlabd->ijab", x4, t3)
    del x4
    t2new += einsum("ijab->ijab", x70) * 2.0
    t2new += einsum("jiba->ijab", x70) * 2.0
    del x70
    x71 = np.zeros((nocc, nvir, nvir, nvir), dtype=np.float64)
    x71 += einsum("jd,acbd->jacb", t1, v.vvvv)
    x72 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x72 += einsum("ic,jacb->ijab", t1, x71)
    t2new += einsum("ijab->ijab", x72)
    del x72
    x73 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x73 += einsum("ikld,jklbad->jbai", x47, t3)
    t2new += einsum("iabj->ijab", x73) * -0.5
    t2new += einsum("jbai->ijab", x73) * -0.5
    del x73
    x74 = np.zeros((nvir, nocc, nocc, nvir), dtype=np.float64)
    x74 += einsum("kcad,jikbdc->ajib", v.ovvv, t3)
    t2new += einsum("ajib->ijab", x74)
    t2new += einsum("bija->ijab", x74)
    del x74
    x75 = np.zeros((nvir, nocc, nocc, nvir), dtype=np.float64)
    x75 += einsum("kcad,ijkcbd->aijb", v.ovvv, t3)
    t2new += einsum("aijb->ijab", x75) * -0.5
    t2new += einsum("bjia->ijab", x75) * -0.5
    del x75
    x76 = np.zeros((nvir, nocc, nocc, nvir), dtype=np.float64)
    x76 += einsum("kcad,ijkdbc->aijb", v.ovvv, t3)
    t2new += einsum("aijb->ijab", x76) * 0.5
    t2new += einsum("bjia->ijab", x76) * 0.5
    del x76
    x77 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x77 += einsum("iklc,kjlabc->ijab", v.ooov, t3)
    t2new += einsum("ijab->ijab", x77) * -0.5
    t2new += einsum("jiba->ijab", x77) * -0.5
    del x77
    x78 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x78 += einsum("iklc,ljkabc->ijab", v.ooov, t3)
    t2new += einsum("ijab->ijab", x78) * 0.5
    t2new += einsum("jiba->ijab", x78) * 0.5
    del x78
    x79 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x79 += einsum("ijcd,acbd->ijab", t2, v.vvvv)
    t2new += einsum("ijab->ijab", x79)
    del x79
    x80 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x80 += einsum("iklc,jklbac->ijba", v.ooov, t3)
    t2new += einsum("ijba->ijab", x80) * -1.0
    t2new += einsum("jiab->ijab", x80) * -1.0
    del x80
    x81 = np.zeros((nocc, nocc, nocc, nocc), dtype=np.float64)
    x81 += einsum("ijcd,kcld->ijkl", t2, v.ovov)
    x82 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x82 += einsum("lb,ijkl->bijk", t1, x81)
    x83 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x83 += einsum("kjcb,iakc->jbia", t2, v.ovov)
    t2new += einsum("jbia->ijab", x83)
    x84 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x84 += einsum("ikca,jbkc->iajb", t2, v.ovov)
    t2new += einsum("iajb->ijab", x84) * -1.0
    t2new += einsum("jbia->ijab", x84) * -1.0
    x85 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x85 += einsum("kc,ijac->ijak", x26, t2)
    del x26
    x86 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x86 += einsum("ijka->ijka", x65)
    x86 += einsum("ijak->ijka", x85)
    del x85
    x87 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x87 += einsum("ikac,jbkc->iajb", t2, v.ovov)
    t2new += einsum("jbia->ijab", x87)
    x88 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x88 += einsum("ic,jbkc->ijbk", t1, x87)
    x89 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x89 += einsum("kc,ijkabc->ijab", f.ov, t3)
    t2new += einsum("ijab->ijab", x89)
    t2new += einsum("jiba->ijab", x89)
    del x89
    x90 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x90 += einsum("ic,jbac->ijba", t1, v.ovvv)
    t2new += einsum("ijba->ijab", x90)
    t2new += einsum("jiab->ijab", x90)
    x91 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x91 += einsum("jkdb,ikda->jbia", t2, x90)
    t2new += einsum("iajb->ijab", x91) * -1.0
    t2new += einsum("jbia->ijab", x91) * -1.0
    del x91
    x92 = np.zeros((nocc, nocc, nocc, nocc), dtype=np.float64)
    x92 += einsum("ic,jlkc->ijlk", t1, v.ooov)
    x93 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x93 += einsum("la,ijml->aijm", t1, x92)
    x94 = np.zeros((nocc, nocc, nocc, nocc), dtype=np.float64)
    x94 += einsum("ijlk->ijlk", x92)
    x94 += einsum("jikl->ijlk", x92)
    x95 = np.zeros((nocc, nocc, nocc, nocc), dtype=np.float64)
    x95 += einsum("ikjl->ijlk", v.oooo)
    x95 += einsum("ijlk->ijlk", x94)
    del x94
    x96 = np.zeros((nvir, nvir, nocc, nocc), dtype=np.float64)
    x96 += einsum("klab,ijlk->abij", t2, x95)
    del x95
    t2new += einsum("abij->ijab", x96)
    del x96
    x97 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x97 += einsum("kijb->kijb", x54)
    x97 += einsum("jikb->kijb", x65)
    x98 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x98 += einsum("ic,kcbd->ikbd", t1, v.ovvv)
    x99 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x99 += einsum("ikbd->ikbd", v.oovv)
    x99 += einsum("ikbd->ikbd", x98)
    x100 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x100 += einsum("ikdb,jkad->ibja", t2, x99)
    t2new += einsum("ibja->ijab", x100) * -1.0
    del x100
    x101 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x101 += einsum("kjad,ikbd->jaib", t2, x99)
    del x99
    t2new += einsum("jaib->ijab", x101) * -1.0
    del x101
    x102 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x102 += einsum("ikda->ikda", x90)
    x102 += einsum("ikad->ikda", x98) * -1.0
    x103 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x103 += einsum("ikad->ikda", v.oovv) * -1.0
    x103 += einsum("ikda->ikda", x102)
    del x102
    x104 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x104 += einsum("jkbd->jkbd", x21)
    del x21
    x104 += einsum("jkbd->jkbd", x98)
    del x98
    x105 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x105 += einsum("ikad,jkbd->iajb", t2, x104)
    del x104
    t2new += einsum("iajb->ijab", x105) * -1.0
    del x105
    x106 = np.zeros((nvir, nvir), dtype=np.float64)
    x106 += einsum("bd->db", f.vv) * -1.0
    x106 += einsum("db->db", x16)
    x107 = np.zeros((nvir, nvir), dtype=np.float64)
    x107 += einsum("ac->ac", x40)
    del x40
    x107 += einsum("ac->ac", x6) * -3.0
    del x6
    x108 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x108 += einsum("ic,jbkc->ijbk", t1, x84)
    x109 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x109 += einsum("jbkc->jbkc", x83)
    del x83
    x109 += einsum("jbkc->jbkc", x87)
    del x87
    x110 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x110 += einsum("jbkc->jbkc", x109) * -1.0
    del x109
    x110 += einsum("jbkc->jbkc", x84)
    del x84
    x111 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x111 += einsum("jbkc,ikac->iajb", x110, x8)
    del x110
    t2new += einsum("iajb->ijab", x111) * -1.0
    del x111
    x112 = np.zeros((nvir, nvir), dtype=np.float64)
    x112 += einsum("cb->cb", x106) * 2.0
    del x106
    x112 += einsum("bc->cb", x63) * -1.0
    del x63
    x113 = np.zeros((nocc, nocc), dtype=np.float64)
    x113 += einsum("kcld,ikdc->li", v.ovov, x8)
    del x8
    x114 = np.zeros((nocc, nocc), dtype=np.float64)
    x114 += einsum("li->il", x113) * -1.0
    del x113
    x114 += einsum("il->il", x30)
    x115 = np.zeros((nocc, nocc), dtype=np.float64)
    x115 += einsum("il->il", x114)
    del x114
    x115 += einsum("il->il", x29)
    x116 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x116 += einsum("il,ljab->jabi", x115, t2)
    del x115
    t2new += einsum("jabi->ijab", x116)
    del x116
    x117 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x117 += einsum("ikac,kdlc->iadl", t2, v.ovov)
    x118 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x118 += einsum("cb,ijac->ijab", x112, t2)
    del x112
    t2new += einsum("ijab->ijab", x118) * -0.5
    del x118
    x119 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x119 += einsum("lb,ijlk->bijk", t1, x92)
    del x92
    x120 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x120 += einsum("bijk->bjik", x119)
    x120 += einsum("bjik->bjik", x93)
    x121 = np.zeros((nocc, nocc), dtype=np.float64)
    x121 += einsum("ljcd,kdlc->jk", t2, v.ovov)
    x122 = np.zeros((nocc, nocc), dtype=np.float64)
    x122 += einsum("jk->jk", x121) * -1.0
    del x121
    x122 += einsum("jk->jk", x30)
    del x30
    x123 = np.zeros((nocc, nocc), dtype=np.float64)
    x123 += einsum("jk->jk", x122)
    del x122
    x123 += einsum("jk->jk", x29)
    del x29
    x124 = np.zeros((nvir, nvir), dtype=np.float64)
    x124 += einsum("da->ad", x16) * -1.0
    del x16
    x124 += einsum("ad->ad", x2)
    del x2
    x125 = np.zeros((nvir, nvir), dtype=np.float64)
    x125 += einsum("ad->ad", x124)
    del x124
    x125 += einsum("ad->ad", x56) * -1.0
    del x56
    x126 = np.zeros((nvir, nvir), dtype=np.float64)
    x126 += einsum("ac->ac", x107)
    del x107
    x126 += einsum("ac->ac", x125) * 2.0
    del x125
    x127 = np.zeros((nocc, nocc, nvir, nvir), dtype=np.float64)
    x127 += einsum("ac,ijcb->ijba", x126, t2)
    del x126
    t2new += einsum("ijba->ijab", x127) * 0.5
    del x127
    x128 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x128 += einsum("iajk->iajk", x49) * 2.0
    x128 += einsum("iajk->iajk", x60) * -1.0
    x129 = np.zeros((nocc, nocc), dtype=np.float64)
    x129 += einsum("jk->jk", x123) * -1.0
    del x123
    x129 += einsum("jk->jk", x69)
    del x69
    x130 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x130 += einsum("jk,ikab->iabj", x129, t2)
    del x129
    t2new += einsum("iabj->ijab", x130) * -1.0
    del x130
    x131 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x131 += einsum("bjik->bikj", x120)
    del x120
    x131 += einsum("bikj->bikj", x66)
    x132 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x132 += einsum("ikjb->bikj", v.ooov) * -1.0
    x132 += einsum("bikj->bikj", x131)
    del x131
    x133 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x133 += einsum("ib,jckb->ijck", t1, v.ovov)
    x134 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x134 += einsum("jiak->jiak", x133)
    x134 += einsum("ijka->jiak", x86)
    del x86
    x135 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x135 += einsum("ilad,jkdl->iajk", t2, x133)
    x136 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x136 += einsum("jiak->iajk", x108)
    x136 += einsum("iajk->iajk", x135)
    del x135
    x137 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x137 += einsum("ljad,ikdl->jaik", t2, x133)
    x138 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x138 += einsum("jaik->jaik", x137)
    del x137
    x138 += einsum("jiak->jaik", x88) * -2.0
    x139 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x139 += einsum("iajk->jaik", x136)
    del x136
    x139 += einsum("jaik->jaik", x138)
    del x138
    x140 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x140 += einsum("jaik->jaik", x139)
    del x139
    x140 += einsum("ijka->jaik", x61) * -1.0
    del x61
    x141 = np.zeros((nvir, nocc, nvir, nocc), dtype=np.float64)
    x141 += einsum("kb,jaik->bjai", t1, x140)
    del x140
    t2new += einsum("bjai->ijab", x141)
    del x141
    x142 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x142 += einsum("ijbk->ijbk", x133)
    x142 += einsum("kijb->ijbk", x97)
    del x97
    x143 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x143 += einsum("ikdl,kjlabd->jabi", x133, t3)
    t2new += einsum("ibaj->ijab", x143) * 0.5
    t2new += einsum("jabi->ijab", x143) * 0.5
    del x143
    x144 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x144 += einsum("ikdl,jlkbad->jbai", x133, t3)
    t2new += einsum("iabj->ijab", x144) * -0.5
    t2new += einsum("jbai->ijab", x144) * -0.5
    del x144
    x145 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x145 += einsum("jlkd->jkdl", v.ooov)
    x145 += einsum("jkdl->jkdl", x133)
    x146 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x146 += einsum("ildb,jkdl->ibjk", t2, x145)
    del x145
    x147 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x147 += einsum("ibjk->bijk", x146)
    del x146
    x147 += einsum("bijk->bijk", x82)
    del x82
    x148 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x148 += einsum("bijk->bijk", x147)
    del x147
    x148 += einsum("jbik->bijk", x49) * -1.0
    del x49
    x149 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x149 += einsum("bijk->bijk", x148)
    del x148
    x149 += einsum("jbik->bijk", x60)
    del x60
    x150 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x150 += einsum("kjdb,ikda->jbia", t2, x103)
    del x103
    t2new += einsum("jbia->ijab", x150)
    del x150
    x151 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x151 += einsum("ikdl->ikld", x133) * -1.0
    x151 += einsum("ikld->ikld", x47)
    del x47
    x152 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x152 += einsum("ljdb,ikld->jbik", t2, x151)
    del x151
    x153 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x153 += einsum("jbik->jbik", x152)
    del x152
    x153 += einsum("ijbk->jbik", x88)
    del x88
    x154 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x154 += einsum("ijbk->jbik", x108) * -1.0
    del x108
    x154 += einsum("jbik->jbik", x153)
    del x153
    x155 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x155 += einsum("bijk->jbik", x149) * -1.0
    del x149
    x155 += einsum("jbik->jbik", x154)
    del x154
    x156 = np.zeros((nocc, nocc, nocc, nocc), dtype=np.float64)
    x156 += einsum("ic,jkcl->ijkl", t1, x133)
    x157 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x157 += einsum("la,ijlm->aijm", t1, x156)
    x158 = np.zeros((nocc, nocc, nocc, nocc), dtype=np.float64)
    x158 += einsum("ijkl->ijkl", x156)
    del x156
    x158 += einsum("ijkl->ijkl", x81)
    del x81
    x159 = np.zeros((nvir, nvir, nocc, nocc), dtype=np.float64)
    x159 += einsum("klab,ijkl->abij", t2, x158)
    del x158
    t2new += einsum("abij->ijab", x159)
    del x159
    x160 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x160 += einsum("jial->aijl", x134) * -1.0
    del x134
    x160 += einsum("aijl->aijl", x157)
    x161 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x161 += einsum("ic,jkcb->ijkb", t1, x90)
    x162 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x162 += einsum("ijkb->jbik", x161)
    x162 += einsum("jbik->jbik", x50)
    del x50
    x163 = np.zeros((nocc, nocc, nvir, nocc), dtype=np.float64)
    x163 += einsum("ijbk->ijbk", x142)
    del x142
    x163 += einsum("jbik->ijbk", x162)
    del x162
    x164 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x164 += einsum("bikj->bikj", x132)
    del x132
    x164 += einsum("ijbk->bikj", x163) * -1.0
    del x163
    x165 = np.zeros((nvir, nvir, nocc, nocc), dtype=np.float64)
    x165 += einsum("ka,bikj->abij", t1, x164)
    del x164
    t2new += einsum("abij->ijab", x165)
    del x165
    x166 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x166 += einsum("kcld,ijlcbd->kijb", v.ovov, t3)
    x167 = np.zeros((nvir, nocc, nocc, nvir), dtype=np.float64)
    x167 += einsum("ka,kijb->aijb", t1, x166)
    del x166
    t2new += einsum("aijb->ijab", x167) * -0.5
    t2new += einsum("bjia->ijab", x167) * -0.5
    del x167
    x168 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x168 += einsum("ljac,ilkc->jaik", t2, v.ooov)
    x169 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x169 += einsum("jaik->iajk", x168)
    del x168
    x169 += einsum("iajk->iajk", x64)
    del x64
    x170 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x170 += einsum("iajk->iajk", x128)
    del x128
    x170 += einsum("iajk->iajk", x169) * -1.0
    del x169
    x171 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x171 += einsum("jika->iajk", x161)
    x171 += einsum("iajk->iajk", x170)
    del x170
    x172 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x172 += einsum("aijk->iajk", x160) * -1.0
    del x160
    x172 += einsum("iajk->iajk", x171)
    del x171
    x173 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x173 += einsum("jkia->iajk", v.ooov)
    x173 += einsum("iajk->iajk", x172)
    del x172
    x174 = np.zeros((nvir, nocc, nvir, nocc), dtype=np.float64)
    x174 += einsum("kb,iajk->biaj", t1, x173)
    del x173
    t2new += einsum("biaj->ijab", x174) * -1.0
    del x174
    x175 = np.zeros((nocc, nvir, nvir, nocc), dtype=np.float64)
    x175 += einsum("iadl->iadl", x117)
    x175 += einsum("iadl->iadl", x58) * -1.0
    del x58
    x176 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x176 += einsum("ljdb,iadl->jbia", t2, x175)
    del x175
    t2new += einsum("jbia->ijab", x176) * -1.0
    del x176
    x177 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x177 += einsum("iadl,jlbd->jbia", x117, x53)
    del x117, x53
    t2new += einsum("jbia->ijab", x177) * -1.0
    del x177
    x178 = np.zeros((nocc, nvir, nocc, nvir), dtype=np.float64)
    x178 += einsum("jkbd,ikda->jbia", t2, x90)
    t2new += einsum("iajb->ijab", x178) * 2.0
    t2new += einsum("jbia->ijab", x178)
    del x178
    x179 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x179 += einsum("ijcd,kcbd->ijkb", t2, v.ovvv)
    x180 = np.zeros((nocc, nvir, nocc, nocc), dtype=np.float64)
    x180 += einsum("jbik->jbik", x155)
    del x155
    x180 += einsum("ijkb->jbik", x179)
    del x179
    x181 = np.zeros((nvir, nocc, nvir, nocc), dtype=np.float64)
    x181 += einsum("ka,jbik->ajbi", t1, x180)
    del x180
    t2new += einsum("ajbi->ijab", x181) * -1.0
    del x181
    x182 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x182 += einsum("kjeb,ilec->kjbilc", t2, x90)
    x183 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x183 += einsum("ijcd,klbd->ijcklb", t2, v.oovv)
    x184 = np.zeros((nvir, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x184 += einsum("la,ijcklb->aijckb", t1, x183)
    t3new = np.zeros((nocc, nocc, nocc, nvir, nvir, nvir), dtype=np.float64)
    t3new += einsum("aijckb->ijkabc", x184)
    t3new += einsum("akjcib->ijkabc", x184) * -1.0
    t3new += einsum("cijakb->ijkabc", x184) * -1.0
    t3new += einsum("ckjaib->ijkabc", x184)
    del x184
    x185 = np.zeros((nvir, nocc, nocc, nocc), dtype=np.float64)
    x185 += einsum("la,iljm->aijm", t1, v.oooo)
    x186 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x186 += einsum("ljab,iklc->jabikc", t2, x161)
    t3new += einsum("jabikc->ijkabc", x186) * -1.0
    t3new += einsum("jabkic->ijkabc", x186)
    t3new += einsum("jcbika->ijkabc", x186)
    t3new += einsum("jcbkia->ijkabc", x186) * -1.0
    del x186
    x187 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x187 += einsum("ijdb,klcd->ijbklc", t2, v.oovv)
    x188 = np.zeros((nvir, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x188 += einsum("la,ijbklc->aijbkc", t1, x187)
    t3new += einsum("aijbkc->ijkabc", x188)
    t3new += einsum("akjbic->ijkabc", x188) * -1.0
    t3new += einsum("cijbka->ijkabc", x188) * -1.0
    t3new += einsum("ckjbia->ijkabc", x188)
    del x188
    x189 = np.zeros((nocc, nocc, nocc, nvir, nvir, nvir), dtype=np.float64)
    x189 += einsum("jl,ilkabc->jikabc", f.oo, t3)
    t3new += einsum("jikabc->ijkabc", x189) * -1.0
    del x189
    x190 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x190 += einsum("mjcb,aikm->jcbaik", t2, x93)
    t3new += einsum("jabcik->ijkabc", x190) * -1.0
    t3new += einsum("jabcki->ijkabc", x190)
    t3new += einsum("jcbaik->ijkabc", x190)
    t3new += einsum("jcbaki->ijkabc", x190) * -1.0
    del x190
    x191 = np.zeros((nocc, nocc, nocc, nvir, nvir, nvir), dtype=np.float64)
    x191 += einsum("il,kjlabc->ikjabc", f.oo, t3)
    t3new += einsum("ikjabc->ijkabc", x191)
    t3new += einsum("kijabc->ijkabc", x191) * -1.0
    del x191
    x192 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x192 += einsum("klac,lijb->kacijb", t2, x54)
    t3new += einsum("iackjb->ijkabc", x192) * -1.0
    t3new += einsum("icakjb->ijkabc", x192)
    t3new += einsum("kacijb->ijkabc", x192)
    t3new += einsum("kcaijb->ijkabc", x192) * -1.0
    del x192
    x193 = np.zeros((nocc, nocc, nvir, nocc, nvir, nocc), dtype=np.float64)
    x193 += einsum("ikdc,jbld->ikcjbl", t2, v.ovov)
    x194 = np.zeros((nocc, nocc, nocc, nocc, nvir, nvir), dtype=np.float64)
    x194 += einsum("ld,ijkcbd->lijkcb", f.ov, t3)
    x195 = np.zeros((nvir, nocc, nocc, nocc, nvir, nvir), dtype=np.float64)
    x195 += einsum("la,lijkcb->aijkcb", t1, x194)
    del x194
    t3new += einsum("aijkcb->ijkabc", x195)
    t3new += einsum("cijkab->ijkabc", x195) * -1.0
    del x195
    x196 = np.zeros((nvir, nocc, nocc, nocc, nvir, nvir), dtype=np.float64)
    x196 += einsum("ad,ijkcbd->aijkcb", f.vv, t3)
    t3new += einsum("aijkcb->ijkabc", x196) * -1.0
    t3new += einsum("cijkab->ijkabc", x196)
    del x196
    x197 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x197 += einsum("mjcb,aikm->jcbaik", t2, x119)
    t3new += einsum("jabcik->ijkabc", x197)
    t3new += einsum("jabcki->ijkabc", x197) * -1.0
    t3new += einsum("jcbaik->ijkabc", x197) * -1.0
    t3new += einsum("jcbaki->ijkabc", x197)
    del x197
    x198 = np.zeros((nvir, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x198 += einsum("la,kjbilc->akjbic", t1, x182)
    del x182
    t3new += einsum("aijbkc->ijkabc", x198) * -1.0
    t3new += einsum("aikcjb->ijkabc", x198) * -1.0
    t3new += einsum("akjbic->ijkabc", x198)
    t3new += einsum("cijbka->ijkabc", x198)
    t3new += einsum("cikajb->ijkabc", x198)
    t3new += einsum("ckjbia->ijkabc", x198) * -1.0
    del x198
    x199 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x199 += einsum("mjcb,aikm->jcbaik", t2, x157)
    t3new += einsum("jabcik->ijkabc", x199) * -1.0
    t3new += einsum("jabcki->ijkabc", x199)
    t3new += einsum("jcbaik->ijkabc", x199)
    t3new += einsum("jcbaki->ijkabc", x199) * -1.0
    del x199
    x200 = np.zeros((nocc, nocc, nvir, nocc, nocc, nocc), dtype=np.float64)
    x200 += einsum("ikdc,jmld->ikcjml", t2, v.ooov)
    x201 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x201 += einsum("mb,ikcjml->bikcjl", t1, x200)
    del x200
    x202 = np.zeros((nvir, nvir, nocc, nocc, nvir, nocc), dtype=np.float64)
    x202 += einsum("la,bikcjl->abikcj", t1, x201)
    del x201
    t3new += einsum("abikcj->ijkabc", x202)
    t3new += einsum("acijbk->ijkabc", x202)
    t3new += einsum("ackjbi->ijkabc", x202) * -1.0
    t3new += einsum("caijbk->ijkabc", x202) * -1.0
    t3new += einsum("cakjbi->ijkabc", x202)
    t3new += einsum("cbikaj->ijkabc", x202) * -1.0
    del x202
    x203 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x203 += einsum("kmac,bijm->kacbij", t2, x119)
    del x119
    t3new += einsum("iabcjk->ijkabc", x203)
    t3new += einsum("iacbkj->ijkabc", x203)
    t3new += einsum("icabkj->ijkabc", x203) * -1.0
    t3new += einsum("icbajk->ijkabc", x203) * -1.0
    t3new += einsum("kabcji->ijkabc", x203) * -1.0
    t3new += einsum("kacbij->ijkabc", x203) * -1.0
    t3new += einsum("kcabij->ijkabc", x203)
    t3new += einsum("kcbaji->ijkabc", x203)
    del x203
    x204 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x204 += einsum("ljcb,ikal->jcbika", t2, x133)
    t3new += einsum("jabikc->ijkabc", x204) * -1.0
    t3new += einsum("jabkic->ijkabc", x204)
    t3new += einsum("jcbika->ijkabc", x204)
    t3new += einsum("jcbkia->ijkabc", x204) * -1.0
    del x204
    x205 = np.zeros((nocc, nocc, nvir, nocc, nocc, nocc), dtype=np.float64)
    x205 += einsum("ikcd,jmld->ikcjml", t2, v.ooov)
    x206 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x206 += einsum("mb,ikcjml->bikcjl", t1, x205)
    del x205
    x207 = np.zeros((nvir, nvir, nocc, nocc, nvir, nocc), dtype=np.float64)
    x207 += einsum("la,bikcjl->abikcj", t1, x206)
    t3new += einsum("abikcj->ijkabc", x207) * -1.0
    t3new += einsum("cbikaj->ijkabc", x207)
    del x207
    x208 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x208 += einsum("klac,ijbl->kacijb", t2, x133)
    t3new += einsum("iabjkc->ijkabc", x208) * -1.0
    t3new += einsum("iackjb->ijkabc", x208) * -1.0
    t3new += einsum("icakjb->ijkabc", x208)
    t3new += einsum("icbjka->ijkabc", x208)
    t3new += einsum("kabjic->ijkabc", x208)
    t3new += einsum("kacijb->ijkabc", x208)
    t3new += einsum("kcaijb->ijkabc", x208) * -1.0
    t3new += einsum("kcbjia->ijkabc", x208) * -1.0
    del x208
    x209 = np.zeros((nvir, nocc, nocc, nocc, nvir, nvir), dtype=np.float64)
    x209 += einsum("bd,ijkadc->bijkac", f.vv, t3)
    t3new += einsum("bijkac->ijkabc", x209)
    del x209
    x210 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x210 += einsum("ilab,jlkc->iabjkc", t2, v.ooov)
    t3new += einsum("iabjkc->ijkabc", x210) * -1.0
    t3new += einsum("iackjb->ijkabc", x210) * -1.0
    t3new += einsum("icakjb->ijkabc", x210)
    t3new += einsum("icbjka->ijkabc", x210)
    t3new += einsum("kabjic->ijkabc", x210)
    t3new += einsum("kacijb->ijkabc", x210)
    t3new += einsum("kcaijb->ijkabc", x210) * -1.0
    t3new += einsum("kcbjia->ijkabc", x210) * -1.0
    del x210
    x211 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x211 += einsum("klac,ijlb->kacijb", t2, x161)
    del x161
    t3new += einsum("iabjkc->ijkabc", x211) * -1.0
    t3new += einsum("iackjb->ijkabc", x211) * -1.0
    t3new += einsum("icakjb->ijkabc", x211)
    t3new += einsum("icbjka->ijkabc", x211)
    t3new += einsum("kabjic->ijkabc", x211)
    t3new += einsum("kacijb->ijkabc", x211)
    t3new += einsum("kcaijb->ijkabc", x211) * -1.0
    t3new += einsum("kcbjia->ijkabc", x211) * -1.0
    del x211
    x212 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x212 += einsum("kmcb,aijm->kcbaij", t2, x157)
    del x157
    t3new += einsum("iabckj->ijkabc", x212)
    t3new += einsum("iacbjk->ijkabc", x212)
    t3new += einsum("icabjk->ijkabc", x212) * -1.0
    t3new += einsum("icbakj->ijkabc", x212) * -1.0
    t3new += einsum("kabcij->ijkabc", x212) * -1.0
    t3new += einsum("kacbji->ijkabc", x212) * -1.0
    t3new += einsum("kcabji->ijkabc", x212)
    t3new += einsum("kcbaij->ijkabc", x212)
    del x212
    x213 = np.zeros((nocc, nocc, nocc, nvir), dtype=np.float64)
    x213 += einsum("kc,ijac->kija", f.ov, t2)
    x214 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x214 += einsum("ljcb,lika->jcbika", t2, x213)
    t3new += einsum("jabikc->ijkabc", x214)
    t3new += einsum("jcbika->ijkabc", x214) * -1.0
    del x214
    x215 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x215 += einsum("klcb,lija->kcbija", t2, x213)
    del x213
    t3new += einsum("iabkjc->ijkabc", x215) * -1.0
    t3new += einsum("icbkja->ijkabc", x215)
    t3new += einsum("kabijc->ijkabc", x215)
    t3new += einsum("kcbija->ijkabc", x215) * -1.0
    del x215
    x216 = np.zeros((nocc, nvir, nvir, nvir), dtype=np.float64)
    x216 += einsum("id,adbe->iabe", t1, v.vvvv)
    x217 = np.zeros((nocc, nocc, nvir, nocc, nvir, nvir), dtype=np.float64)
    x217 += einsum("kjeb,iace->kjbiac", t2, x216)
    t3new += einsum("ijbkac->ijkabc", x217) * -1.0
    t3new += einsum("ikajbc->ijkabc", x217) * -1.0
    t3new += einsum("kjbiac->ijkabc", x217)
    del x217
    x218 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x218 += einsum("kmcb,aijm->kcbaij", t2, x185)
    t3new += einsum("iacbjk->ijkabc", x218)
    t3new += einsum("icabjk->ijkabc", x218) * -1.0
    t3new += einsum("kabcij->ijkabc", x218) * -1.0
    t3new += einsum("kcbaij->ijkabc", x218)
    del x218
    x219 = np.zeros((nocc, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x219 += einsum("id,kjbldm->ikjblm", t1, x193)
    x220 = np.zeros((nvir, nocc, nocc, nocc, nvir, nocc), dtype=np.float64)
    x220 += einsum("mc,ikjblm->cikjbl", t1, x219)
    del x219
    x221 = np.zeros((nvir, nvir, nocc, nocc, nocc, nvir), dtype=np.float64)
    x221 += einsum("la,cikjbl->acikjb", t1, x220)
    del x220
    t3new += einsum("acikjb->ijkabc", x221)
    t3new += einsum("ackijb->ijkabc", x221) * -1.0
    del x221
    x222 = np.zeros((nocc, nocc, nocc, nocc, nvir, nvir), dtype=np.float64)
    x222 += einsum("ld,ijkadc->lijkac", f.ov, t3)
    x223 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x223 += einsum("ikajlc->ikajlc", x183)
    x223 += einsum("lijkac->ikajlc", x222)
    del x222
    x224 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x224 += einsum("ikcjla->ikcjla", x183)
    del x183
    x224 += einsum("ikajlc->ikcjla", x223) * -1.0
    del x223
    x225 = np.zeros((nocc, nocc, nvir, nocc, nvir, nvir), dtype=np.float64)
    x225 += einsum("ikad,jbcd->ikajbc", t2, v.ovvv)
    t3new += einsum("ijakcb->ijkabc", x225)
    t3new += einsum("ijckab->ijkabc", x225) * -1.0
    t3new += einsum("ikajbc->ijkabc", x225)
    t3new += einsum("ikcjba->ijkabc", x225) * -1.0
    t3new += einsum("kjaicb->ijkabc", x225) * -1.0
    t3new += einsum("kjciab->ijkabc", x225)
    x226 = np.zeros((nocc, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x226 += einsum("id,kjcldb->ikjclb", t1, x225)
    del x225
    x227 = np.zeros((nvir, nocc, nocc, nocc, nvir, nvir), dtype=np.float64)
    x227 += einsum("la,ikjclb->aikjcb", t1, x226)
    del x226
    t3new += einsum("aikjcb->ijkabc", x227) * -1.0
    t3new += einsum("akijcb->ijkabc", x227)
    t3new += einsum("bjikac->ijkabc", x227) * -1.0
    t3new += einsum("bjikca->ijkabc", x227)
    t3new += einsum("cikjab->ijkabc", x227)
    t3new += einsum("ckijab->ijkabc", x227) * -1.0
    del x227
    x228 = np.zeros((nocc, nocc, nvir, nocc, nvir, nocc), dtype=np.float64)
    x228 += einsum("ikcd,jbld->ikcjbl", t2, v.ovov)
    x229 = np.zeros((nvir, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x229 += einsum("la,ikcjbl->aikcjb", t1, x228)
    t3new += einsum("aikcjb->ijkabc", x229)
    t3new += einsum("cikajb->ijkabc", x229) * -1.0
    del x229
    x230 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x230 += einsum("ljab,ilkc->jabikc", t2, v.ooov)
    t3new += einsum("jabikc->ijkabc", x230) * -1.0
    t3new += einsum("jabkic->ijkabc", x230)
    t3new += einsum("jcbika->ijkabc", x230)
    t3new += einsum("jcbkia->ijkabc", x230) * -1.0
    del x230
    x231 = np.zeros((nocc, nocc, nvir, nocc, nocc, nocc), dtype=np.float64)
    x231 += einsum("kjeb,ilem->kjbilm", t2, x133)
    x232 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x232 += einsum("mc,kjbilm->ckjbil", t1, x231)
    del x231
    x233 = np.zeros((nvir, nvir, nocc, nocc, nvir, nocc), dtype=np.float64)
    x233 += einsum("la,ckjbil->ackjbi", t1, x232)
    del x232
    t3new += einsum("abikcj->ijkabc", x233)
    t3new += einsum("acijbk->ijkabc", x233)
    t3new += einsum("ackjbi->ijkabc", x233) * -1.0
    t3new += einsum("cbikaj->ijkabc", x233) * -1.0
    del x233
    x234 = np.zeros((nocc, nocc, nvir, nvir, nvir, nocc), dtype=np.float64)
    x234 += einsum("lj,ilkabc->ikabcj", x17, t3)
    t3new += einsum("ikabcj->ijkabc", x234) * -1.0
    del x234
    x235 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x235 += einsum("ljab,likc->jabikc", t2, x54)
    del x54
    t3new += einsum("jabikc->ijkabc", x235) * -1.0
    t3new += einsum("jcbika->ijkabc", x235)
    del x235
    x236 = np.zeros((nvir, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x236 += einsum("la,ikcjbl->aikcjb", t1, x193)
    del x193
    t3new += einsum("aijbkc->ijkabc", x236) * -1.0
    t3new += einsum("aikcjb->ijkabc", x236) * -1.0
    t3new += einsum("akjbic->ijkabc", x236)
    t3new += einsum("cijbka->ijkabc", x236)
    t3new += einsum("cikajb->ijkabc", x236)
    t3new += einsum("ckjbia->ijkabc", x236) * -1.0
    del x236
    x237 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x237 += einsum("mjcb,aikm->jcbaik", t2, x185)
    del x185
    t3new += einsum("jabcik->ijkabc", x237) * -1.0
    t3new += einsum("jcbaik->ijkabc", x237)
    del x237
    x238 = np.zeros((nocc, nocc, nvir, nocc, nvir, nvir), dtype=np.float64)
    x238 += einsum("kjce,iabe->kjciab", t2, x216)
    del x216
    t3new += einsum("ijckab->ijkabc", x238) * -1.0
    t3new += einsum("ikajbc->ijkabc", x238)
    t3new += einsum("kjciab->ijkabc", x238)
    del x238
    x239 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x239 += einsum("kmcb,aijm->kcbaij", t2, x93)
    del x93
    t3new += einsum("iabckj->ijkabc", x239)
    t3new += einsum("iacbjk->ijkabc", x239)
    t3new += einsum("icabjk->ijkabc", x239) * -1.0
    t3new += einsum("icbakj->ijkabc", x239) * -1.0
    t3new += einsum("kabcij->ijkabc", x239) * -1.0
    t3new += einsum("kacbji->ijkabc", x239) * -1.0
    t3new += einsum("kcabji->ijkabc", x239)
    t3new += einsum("kcbaij->ijkabc", x239)
    del x239
    x240 = np.zeros((nocc, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x240 += einsum("id,kjcldm->ikjclm", t1, x228)
    x241 = np.zeros((nvir, nocc, nocc, nocc, nvir, nocc), dtype=np.float64)
    x241 += einsum("mb,ikjclm->bikjcl", t1, x240)
    del x240
    x242 = np.zeros((nvir, nvir, nocc, nocc, nocc, nvir), dtype=np.float64)
    x242 += einsum("la,bikjcl->abikjc", t1, x241)
    del x241
    t3new += einsum("abikjc->ijkabc", x242)
    t3new += einsum("abkijc->ijkabc", x242) * -1.0
    t3new += einsum("cbikja->ijkabc", x242) * -1.0
    t3new += einsum("cbkija->ijkabc", x242)
    del x242
    x243 = np.zeros((nocc, nocc, nvir, nocc, nvir, nvir), dtype=np.float64)
    x243 += einsum("kjae,ibec->kjaibc", t2, x71)
    t3new += einsum("ijakbc->ijkabc", x243)
    t3new += einsum("ikcjab->ijkabc", x243) * -1.0
    t3new += einsum("kjaibc->ijkabc", x243) * -1.0
    del x243
    x244 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x244 += einsum("imcb,ajmk->icbajk", t2, x66)
    t3new += einsum("iabcjk->ijkabc", x244)
    t3new += einsum("icbajk->ijkabc", x244) * -1.0
    t3new += einsum("kacbij->ijkabc", x244) * -1.0
    t3new += einsum("kcabij->ijkabc", x244)
    del x244
    x245 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x245 += einsum("kjae,ilec->kjailc", t2, x90)
    del x90
    x246 = np.zeros((nvir, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x246 += einsum("lb,kjailc->bkjaic", t1, x245)
    t3new += einsum("aikcjb->ijkabc", x246)
    t3new += einsum("bkjaic->ijkabc", x246)
    t3new += einsum("bkjcia->ijkabc", x246) * -1.0
    t3new += einsum("cikajb->ijkabc", x246) * -1.0
    del x246
    x247 = np.zeros((nocc, nvir, nvir, nvir, nocc, nocc), dtype=np.float64)
    x247 += einsum("mjcb,aimk->jcbaik", t2, x66)
    del x66
    t3new += einsum("jabcik->ijkabc", x247)
    t3new += einsum("jcbaik->ijkabc", x247) * -1.0
    del x247
    x248 = np.zeros((nocc, nocc, nvir, nocc, nocc, nocc), dtype=np.float64)
    x248 += einsum("ikce,jlem->ikcjlm", t2, x133)
    del x133
    x249 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x249 += einsum("ljab,iklc->jabikc", t2, x65)
    t3new += einsum("jabikc->ijkabc", x249)
    t3new += einsum("jabkic->ijkabc", x249) * -1.0
    t3new += einsum("jcbika->ijkabc", x249) * -1.0
    t3new += einsum("jcbkia->ijkabc", x249)
    del x249
    x250 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x250 += einsum("la,ikcjlm->aikcjm", t1, x248)
    del x248
    x251 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x251 += einsum("aikcjm->aikcjm", x250)
    x251 += einsum("cikajm->aikcjm", x250) * -1.0
    del x250
    x252 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x252 += einsum("aijckm->aijckm", x206)
    x252 += einsum("aikcjm->aijckm", x251)
    del x251
    x253 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x253 += einsum("akjcim->akjcim", x206)
    x253 += einsum("aijckm->akjcim", x252) * -1.0
    del x252
    x254 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x254 += einsum("cijakm->cijakm", x206)
    x254 += einsum("akjcim->cijakm", x253)
    del x253
    x255 = np.zeros((nvir, nocc, nocc, nvir, nocc, nocc), dtype=np.float64)
    x255 += einsum("ckjaim->ckjaim", x206)
    del x206
    x255 += einsum("cijakm->ckjaim", x254) * -1.0
    del x254
    x256 = np.zeros((nvir, nvir, nocc, nocc, nvir, nocc), dtype=np.float64)
    x256 += einsum("mb,ckjaim->bckjai", t1, x255)
    del x255
    t3new += einsum("bckjai->ijkabc", x256) * -1.0
    del x256
    x257 = np.zeros((nocc, nocc, nvir, nvir, nvir, nocc), dtype=np.float64)
    x257 += einsum("li,kjlabc->kjabci", x17, t3)
    del x17
    t3new += einsum("ijabck->ijkabc", x257) * -1.0
    t3new += einsum("kjabci->ijkabc", x257)
    del x257
    x258 = np.zeros((nocc, nocc, nvir, nocc, nvir, nvir), dtype=np.float64)
    x258 += einsum("kjeb,iaec->kjbiac", t2, x71)
    del x71
    t3new += einsum("ijbkac->ijkabc", x258)
    t3new += einsum("ikcjab->ijkabc", x258)
    t3new += einsum("kjbiac->ijkabc", x258) * -1.0
    del x258
    x259 = np.zeros((nocc, nvir, nvir, nocc, nocc, nvir), dtype=np.float64)
    x259 += einsum("klab,ijlc->kabijc", t2, x65)
    del x65
    t3new += einsum("iabkjc->ijkabc", x259) * -1.0
    t3new += einsum("iacjkb->ijkabc", x259) * -1.0
    t3new += einsum("icajkb->ijkabc", x259)
    t3new += einsum("icbkja->ijkabc", x259)
    t3new += einsum("kabijc->ijkabc", x259)
    t3new += einsum("kacjib->ijkabc", x259)
    t3new += einsum("kcajib->ijkabc", x259) * -1.0
    t3new += einsum("kcbija->ijkabc", x259) * -1.0
    del x259
    x260 = np.zeros((nocc, nocc, nvir, nocc, nvir, nvir), dtype=np.float64)
    x260 += einsum("ikdc,jbad->ikcjba", t2, v.ovvv)
    t3new += einsum("ijbkac->ijkabc", x260) * -1.0
    t3new += einsum("ijbkca->ijkabc", x260)
    t3new += einsum("ikajbc->ijkabc", x260) * -1.0
    t3new += einsum("ikcjba->ijkabc", x260)
    t3new += einsum("kjbiac->ijkabc", x260)
    t3new += einsum("kjbica->ijkabc", x260) * -1.0
    x261 = np.zeros((nocc, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x261 += einsum("id,kjbldc->ikjblc", t1, x260)
    del x260
    x262 = np.zeros((nvir, nocc, nocc, nocc, nvir, nvir), dtype=np.float64)
    x262 += einsum("la,ikjblc->aikjbc", t1, x261)
    t3new += einsum("aikjbc->ijkabc", x262) * -1.0
    t3new += einsum("akijbc->ijkabc", x262)
    t3new += einsum("bjikca->ijkabc", x262) * -1.0
    t3new += einsum("cikjba->ijkabc", x262)
    t3new += einsum("ckijba->ijkabc", x262) * -1.0
    del x262
    x263 = np.zeros((nocc, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x263 += einsum("ikcjla->jikalc", x224)
    del x224
    x263 += einsum("jikalc->jikalc", x261)
    del x261
    x264 = np.zeros((nocc, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x264 += einsum("ijaklc->jikalc", x245) * -1.0
    x264 += einsum("jikalc->jikalc", x263)
    del x263
    x265 = np.zeros((nocc, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x265 += einsum("ijckla->jikalc", x245)
    del x245
    x265 += einsum("jikalc->jikalc", x264)
    del x264
    x266 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x266 += einsum("ikcjla->ikcjla", x187)
    x266 += einsum("jikalc->ikcjla", x265) * -1.0
    del x265
    x267 = np.zeros((nocc, nocc, nvir, nocc, nocc, nvir), dtype=np.float64)
    x267 += einsum("ikajlc->ikajlc", x187)
    del x187
    x267 += einsum("ikcjla->ikajlc", x266) * -1.0
    del x266
    x268 = np.zeros((nocc, nocc, nvir, nocc, nvir, nocc), dtype=np.float64)
    x268 += einsum("ijckal->ijckal", x228)
    x268 += einsum("ikajlc->ijckal", x267)
    del x267
    x269 = np.zeros((nocc, nocc, nvir, nocc, nvir, nocc), dtype=np.float64)
    x269 += einsum("ijakcl->ijakcl", x228)
    x269 += einsum("ijckal->ijakcl", x268) * -1.0
    del x268
    x270 = np.zeros((nocc, nocc, nvir, nocc, nvir, nocc), dtype=np.float64)
    x270 += einsum("kjcial->kjcial", x228)
    x270 += einsum("ijakcl->kjcial", x269)
    del x269
    x271 = np.zeros((nocc, nocc, nvir, nocc, nvir, nocc), dtype=np.float64)
    x271 += einsum("kjaicl->kjaicl", x228)
    del x228
    x271 += einsum("kjcial->kjaicl", x270) * -1.0
    del x270
    x272 = np.zeros((nvir, nocc, nocc, nvir, nocc, nvir), dtype=np.float64)
    x272 += einsum("lb,kjaicl->bkjaic", t1, x271)
    del x271
    t3new += einsum("bkjaic->ijkabc", x272)
    del x272

    return {"t1new": t1new, "t2new": t2new, "t3new": t3new}

